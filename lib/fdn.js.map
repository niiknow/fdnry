{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 19a0986c637f852b19e2","webpack:///./src/index.js","webpack:///external \"jQuery\"","webpack:///./src/feedinary.js","webpack:///./src/util.js"],"names":[],"mappings":"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","file":"fdn.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"jQuery\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"fdn\", [\"jQuery\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"fdn\"] = factory(require(\"jQuery\"));\n\telse\n\t\troot[\"fdn\"] = factory(root[\"jQuery\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 19a0986c637f852b19e2\n **/","import $ from 'jquery';\nimport Feedinary from './feedinary';\n\nlet fdn = new Feedinary();\n\n$(\"script[src*='/fdn.']\").each((i, e) => {\n  let data = $(e).data();\n\n  $.each(data, (k, v) => {\n    if (['client', 'theme', 'name', 'url'].indexOf(k) > 0) {\n      if (typeof (v) === 'string') {\n        fdn.opts[k] = v;\n      }\n    }\n  });\n});\n\n$(() => {\n  fdn.init();\n});\nexport default fdn;\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/index.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"jQuery\"\n ** module id = 1\n ** module chunks = 0\n **/","import $ from 'jquery';\nimport Util from './util';\n\nexport default class Feedinary {\n  constructor() {\n    this.config = {\n      channel: 'homepage',\n      url: 'http://localhost:3000/api/',\n      header: '<div class=\"fdn-content\">',\n      footer: '',\n      emptyText: '<div class=\"fdn-content\"><div class=\"fdn-desc\"></div></div>'\n    };\n  }\n\n  init(client, theme, channel, url) {\n    this.config.fdnedit = ((location || {}).search || '').indexOf('fdnedit') > -1;\n    this.config.client = client || this.config.client;\n    this.config.theme = theme || this.config.theme;\n    this.config.channel = channel || this.config.channel;\n    this.config.url = url || this.config.url;\n    this.config.css = `.fdn-content {\n  position: relative;\n}\n.fdn-desc:empty:not(focus):before {\n  content: \"[[empty]]\";\n  color: #ccc;\n}\n.fdn-desc:hover {\n  cursor: pointer;\n  border: 2px dashed #ccc;\n}\n.fdn-desc:hover:after {\n  content: \"tap/click to edit...\";\n  padding: 4px 8px;\n  color: #000;\n  position: absolute;\n  left: 0;\n  top: -30px;\n  z-index: 20;\n  white-space: nowrap;\n  -moz-border-radius: 5px;\n  -webkit-border-radius: 5px;\n  border-radius: 5px;\n  -moz-box-shadow: 0px 0px 4px #222;\n  -webkit-box-shadow: 0px 0px 4px #222;\n  box-shadow: 0px 0px 4px #222;\n  background-image: -moz-linear-gradient(top, #eeeeee, #cccccc);\n  background-image: -webkit-gradient(linear,left top,left bottom,color-stop(0, #eeeeee),color-stop(1, #cccccc));\n  background-image: -webkit-linear-gradient(top, #eeeeee, #cccccc);\n  background-image: -moz-linear-gradient(top, #eeeeee, #cccccc);\n  background-image: -ms-linear-gradient(top, #eeeeee, #cccccc);\n  background-image: -o-linear-gradient(top, #eeeeee, #cccccc);\n}`;\n\n    $('[data-fdn-name]').addClass('fdn-container');\n    this.injectStyles('fdn');\n\n    if (this.config.fdnedit) {\n      $('.fdn-container:empty').html(this.config.emptyText);\n    }\n  }\n\n  injectStyles(id, rule) {\n    let rulez = rule || this.config.css;\n    let elId = `stylez_${id}`;\n\n    if ($(elId).length <= 0) {\n      let $div = `<div id=\"${elId}\"><style>${rulez}</style></div>`;\n\n      $($div).appendTo('body');\n    }\n  }\n\n  getContent(opts) {\n    opts.url = opts.url || this.opts.url;\n    opts.data.client = this.opts.client;\n    opts.data.type = 'content';\n    opts.data.channel = this.opts.channel;\n    if (this.config.theme) {\n      opts.data.theme = opts.data.theme || this.config.theme;\n    }\n\n    let ut = new Util();\n\n    return ut.request(opts);\n  }\n\n  renderContent(name, content) {\n    let that = this;\n    let cancel = false;\n    let myName = name.toLowerCase();\n\n    // find the destination element, quit if not found\n    let el = $(`[data-fdn-name='${myName}']`);\n\n    if (el.length < 0) {\n      return;\n    }\n\n    if (this.onBeforeRender) {\n      cancel = this.onBeforeRender(myName, content);\n    }\n\n    if (!cancel) {\n      // get the content\n      content = content || (this.cache || {})[myName];\n\n      // build the header\n      let html = `${that.config.header}`;\n      let pi = (content.pi || '').split(',');\n\n      // build impression pixel tracking\n      $.each(pi, (k, v) => {\n        if (v.length > 5) {\n          let vs = v;\n\n          if (v.indexOf('[[') > 0) {\n            vs = vs.replace('[[client]]', that.config.client);\n            vs = vs.replace('[[channel]]', that.config.channel);\n            vs = vs.replace('[[nc]]', new Date().getTime());\n            vs = vs.replace('[[name]]', myName);\n          }\n\n          html += `<img class=\"fdn-pi\" width=\"1\" height=\"1\" border=\"0\" src=\"${vs}\" />`;\n        }\n      });\n\n      html += `<div class=\"fdn-desc\">${content.desc}</div>${that.config.footer}</div>`;\n      el.html('').html(html || '');\n    }\n\n    // trigger on after render\n    if (this.onAfterRender) {\n      this.onAfterRender(myName, content);\n    }\n  }\n\n  render(name) {\n    let that = this;\n\n    if (!that.cache) {\n      that.getContent({\n        data: { channel: that.config.channel }\n      }).then((data) => {\n        if (typeof (data) === 'undefined') {\n          // do nothing\n          that.cache = {};\n        } else if (typeof (data) === 'string' && data.indexOf('{') > 0) {\n          that.cache = JSON.parse(data);\n        } else {\n          that.cache = data;\n        }\n        if (name) {\n          that.renderContent(name);\n        } else {\n          // loop through and render content\n          for (let k in that.cache) {\n            that.renderContent(k);\n          }\n        }\n      });\n    } else {\n      if (name) {\n        that.renderContent(name);\n      } else {\n        // loop through and render content\n        for (let k in that.cache) {\n          that.renderContent(k);\n        }\n      }\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/feedinary.js\n **/","import $ from 'jquery';\n\nexport default class Util {\n  constructor() {}\n\n  /**\n   * make request\n   * @param  {[type]} method  method\n   * @param  {[type]} url     url\n   * @param  {[type]} headers header object\n   * @param  {[type]} body    body object\n   * @param  {String} type    response type\n   * @return {[type]}         a promise\n   */\n  request(opts) {\n    opts.method = opts.method || 'get';\n    return $.ajax(opts.url, opts);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/util.js\n **/"],"sourceRoot":""}